from imapclient import IMAPClient
import mailparser

def get_confirmation_urls(email_address: str, password: str, imap_url: str) -> str:
	with IMAPClient(host=imap_url) as server:
		server.login(email_address, password)
		server.select_folder('INBOX')
		messages = server.search(['FROM','no-reply@hello.skinsmonkey.com'])
		links = []
		for uid, message_data in server.fetch(messages, 'RFC822').items():
			last_message = mailparser.parse_from_string(message_data[b'RFC822'].decode('utf-8'))
			start = last_message.body.find(":")+3
			link = last_message.body[start:]
			link = link[0:link.find('\n')]
			links.append(link)
	return links

def get_confirmation_code():
	# Will be implemented if needed
	pass